package Game;

import processing.core.PApplet;
import processing.core.PImage;
import processing.core.PFont;
import controlP5.*;	

public class haupt extends PApplet{
// Initialisierung //////////////
	//ControlP5 cp5 = new ControlP5(this);
	public int animationchanger=0;
	public int rightmov = 12;
	public int downmov= 0;
	public int upmov=18;
	public int leftmov=6;
	public int bewegungseitlich = 50;
	public int bewegunghorizontal = 50;
	public int startTime;
	int testvar =0;
	///////////
	public String textAusgabe ="Hallo Welt";
	///////////
	public PFont font;
	public PImage[] pimg = new PImage[50];
	public PImage[] backgroundimg = new PImage[9];
	PImage test;
	///////////
	public gameButtons gbuttons = new gameButtons();
	public hitCollisionUmgebung coll = new hitCollisionUmgebung();
	public ImageLoader imgloader = new ImageLoader();
	public BackagroundLoader backloader;
	CharMovment charmov = new CharMovment();
	TextBoxTalk tbox = new TextBoxTalk();
	///////////
	boolean movmenthaltlinks = true;
	boolean movmenthaltrunter = true;
	boolean movmenthalthoch = true;
	boolean movmenthaltrechts = true;
///////////////////////////
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		PApplet.main("Game.haupt"); // Proccesing main wird aufgerufen
	}


	public void setup(){
		frameRate(20);		 // Framerate wird auf 20 gehalten
		gbuttons.buttonsetup(this);
	}
	
	
	
	public void settings(){
		
		size(800,800); // Unser spiel wird in einem Fenster mit 800x600 ge√∂ffnet
		System.out.println(sketchPath()); // Der SketchPath wird ausgegeben, ist unser arbeitspfad f√ºr Dateien.
		imgloader.LoadImageCharMov(pimg); // Der Hauptcharackter wird geladen.
		backloader = new BackagroundLoader(backgroundimg); // Alle Hintergr√ºnde werden geladen
		System.out.println(pimg[5]);
		startTime = millis();
		
	}
	
	
	public void draw(){
		int test2 = mouseX;
		int test3 = mouseY;
		
		//System.out.println(animationchanger);
		System.out.println(framerate);
		//System.out.println("X Achse: " + test2 + " | Y Achse: " +test3);
		//System.out.println(frameRate);
		 background(backgroundimg[backloader.backgroundid]);	// Hintergrund der geladen wird
		 //System.out.println(backloader.backgroundid); 
		 tbox.Textbox(textAusgabe,this,font);
		 //System.out.println(wert);
		 image(pimg[animationchanger] ,bewegungseitlich, bewegunghorizontal);
		// System.out.println(animationchanger);
		 // Das wird der hauptcharackter
		 //System.out.println(bewegungseitlich);
		if(bewegungseitlich >= 570){ // Wenn char auf der x Achse 570 erreicht:
			bewegungseitlich = backloader.backgroundchangerright(bewegungseitlich); // Wird der Hintergrund gewechselt nach rechts
		}
		if(bewegungseitlich <= 20 ){ // Wenn der Char auf der X Achse auf 20 ist:
			bewegungseitlich = backloader.backgroundchangerleft(bewegungseitlich); // wird der hintergrund nach links ge√§ndert
			gbuttons.buttonForAll.show();
		}
		
		if(keyPressed == false){ // Hier befindet sich die Idle Animation
			//delay(200); // Delay von 200 mili sekunden
			
			if(millis() > startTime + 200){
			startTime = millis();
				
				if (animationchanger == 0){ // einfacher Switch f√ºr die Idle Animation
    				animationchanger = 1;
    			}else{
    				animationchanger = 0;
    			}
			}

		}
		
	}
	
public void controlEvent(ControlEvent theEvent){
	System.out.println(theEvent.getController().getName());
}

public void Antwort(int theValue){
	System.out.println("test");
	textAusgabe ="Button Pressed";
	gbuttons.buttonForAll.hide();
}
public void test(int theVaule){
	textAusgabe = "Button Test pressed";
}
	
	public void keyPressed(){ // Alle funktionen f√ºr Key presses
		//test platzhalter = new test(this);
		if((key == 'd' || key == 'D')){ // Bei tastentdruck d Passiert:
			//System.out.println("w");
				
			rightmov = charmov.animationright(rightmov);
			animationchanger = rightmov;// Ruft funktion aus imageLoader aus f√ºr animation
				bewegungseitlich = charmov.charbewegungrechts(bewegungseitlich); // der char bewegt sich in folgende richtung	
		}
		if((key == 'a' || key == 'A')){ // Bei Tastendruck a Passiert :
			
			if (bewegungseitlich < 0){ // Wenn der Charackter bei der x Achse kleiner als 0 ist:
				movmenthaltlinks = false;	// Darf char sich nicht in die richtung bewegen:
			}else{
				movmenthaltlinks = true; // Darf char sich in die richtung bewegen
			}

			if(backloader.backgroundid == 0){// Wenn der Backgroundid 0 ist also erstes bild:
				
				if(movmenthaltlinks == true){ // und der bool wert true ist
					leftmov = charmov.animationleft(leftmov);
					animationchanger = leftmov;
					bewegungseitlich = charmov.charbewegunglinks(bewegungseitlich); // Charackter bewegung in die richtung
				}else{
					
				}
				
			}else{ // Bei anderen backgrounds darf char sich bewegen
				leftmov = charmov.animationleft(leftmov);
				animationchanger = leftmov;
				bewegungseitlich = charmov.charbewegunglinks(bewegungseitlich);	
			}
				
		}
		if((key == ENTER || key == RETURN)){
			textAusgabe = "Enter Wurde gedr¸ckt";
		}
		if((key == 'w' || key == 'W')){ // Bei tastendruck w Passiert:
			//textAusgabe = "das ist die taste w";
			upmov = charmov.animationup(upmov);
			animationchanger = upmov;
			bewegunghorizontal = charmov.charbewegunghoch(bewegunghorizontal);// Char bewegt sich in die richtung
		}
		if((key == 's' || key == 'S')){ // Bei tastendtuck s Passiert:
			//textAusgabe = "das ist die taste s";
			if(bewegunghorizontal >= 530){
				
				movmenthaltrunter = false;
			}else{
				movmenthaltrunter = true;
			}
			if(movmenthaltrunter == true){
				downmov = charmov.animationdown(downmov);
				animationchanger = downmov;
				bewegunghorizontal = charmov.charbewegungrunter(bewegunghorizontal); // Char bewegt sich in die richtung
			}
		}
	}

}